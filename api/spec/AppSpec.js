!function(e){var t={};function a(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=8)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOME_TEAM_WINS=1,t.OUT_TEAM_WINS=2,t.MATCH_IS_DRAW=0,t.COOKIE_NAME="j_uid"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(0);class s{constructor(e,t){this.homeTeamScore=void 0,this.outTeamScore=void 0,this.homeTeamName=e,this.outTeamName=t}getOutCome(){return this.homeTeamScore>this.outTeamScore?o.HOME_TEAM_WINS:this.outTeamScore>this.homeTeamScore?o.OUT_TEAM_WINS:o.MATCH_IS_DRAW}static deserialize(e){const t=new s(e.homeTeamName,e.outTeamName);return Object.assign(t,e),t}}t.Match=s;t.KnockoutMatch=class extends s{constructor(){super(...arguments),this.homeTeamPenaltyScore=void 0,this.outTeamPenaltyScore=void 0,this.homeTeamWins=!1,this.outTeamWins=!1}getOutCome(){return this.homeTeamWins?o.HOME_TEAM_WINS:this.outTeamWins?o.OUT_TEAM_WINS:o.MATCH_IS_DRAW}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e){this.points=0,this.matchesWon=0,this.matchesLost=0,this.matchesDrawed=0,this.goalsScored=0,this.goalsConcieved=0,this.subGroupIndex=0,this.name=e}reset(){this.points=0,this.matchesDrawed=0,this.matchesWon=0,this.matchesLost=0,this.goalsScored=0,this.goalsConcieved=0,this.subGroupIndex=0}getGoalsDifference(){return this.goalsScored-this.goalsConcieved}static deserialize(e){const t=e.name,a=new o(t);return a.points=Number(e.points),a.matchesWon=Number(e.matchesWon),a.matchesLost=Number(e.matchesLost),a.matchesDrawed=Number(e.matchesDrawed),a.goalsScored=Number(e.goalsScored),a.goalsConcieved=Number(e.goalsConcieved),a.subGroupIndex=Number(e.subGroupIndex),a}}t.Team=o},function(e,t,a){"use strict";function o(e){var t=e.groups[0];t.matches[0].outTeamScore=1,t.matches[0].homeTeamScore=3,t.matches[1].outTeamScore=0,t.matches[1].homeTeamScore=0,t.matches[2].outTeamScore=3,t.matches[2].homeTeamScore=3,t.matches[3].outTeamScore=3,t.matches[3].homeTeamScore=3}Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupMatchScores=o,t.setGroupMatchScore2FullyEqualTeams=function(e){o(e);var t=e.groups[0];t.matches[4].outTeamScore=3,t.matches[4].homeTeamScore=3,t.matches[5].outTeamScore=3,t.matches[5].homeTeamScore=3},t.setGroupMatchScore3EqualTeams=function(e){var t=e.groups[0];t.matches[0].outTeamScore=0,t.matches[0].homeTeamScore=4,t.matches[1].outTeamScore=0,t.matches[1].homeTeamScore=1,t.matches[2].outTeamScore=1,t.matches[2].homeTeamScore=3,t.matches[3].outTeamScore=0,t.matches[3].homeTeamScore=1,t.matches[4].outTeamScore=4,t.matches[4].homeTeamScore=1,t.matches[5].outTeamScore=0,t.matches[5].homeTeamScore=2},t.setGroupMatchScore2on2EqualTeamsWithDifferenceBetween=function(e){var t=e.groups[1];t.matches[0].homeTeamScore=1,t.matches[0].outTeamScore=4,t.matches[1].homeTeamScore=3,t.matches[1].outTeamScore=0,t.matches[2].homeTeamScore=4,t.matches[2].outTeamScore=0,t.matches[3].homeTeamScore=3,t.matches[3].outTeamScore=1,t.matches[4].homeTeamScore=0,t.matches[4].outTeamScore=2,t.matches[5].homeTeamScore=2,t.matches[5].outTeamScore=0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(1);t.KnockOutRound=class{constructor(e,t){this.name=e,this.matches=[];for(let e=0;e<t;e++)this.matches.push(new o.KnockoutMatch(void 0,void 0))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(2),s=a(1),r=a(0);class c{constructor(e,t){this.allMatchesPlayed=!1,this.groupNeedsDraw=!1,this.groupname=e,this.teams=t,this.teams&&this.initMatches()}initMatches(){this.matches=[],this.matches.push(new s.Match(this.teams[0].name,this.teams[1].name)),this.matches.push(new s.Match(this.teams[2].name,this.teams[3].name)),this.matches.push(new s.Match(this.teams[0].name,this.teams[2].name)),this.matches.push(new s.Match(this.teams[3].name,this.teams[1].name)),this.matches.push(new s.Match(this.teams[3].name,this.teams[0].name)),this.matches.push(new s.Match(this.teams[1].name,this.teams[2].name))}processMatches(){this.allMatchesPlayed=!0,this.teams.forEach(e=>{e.reset()}),this.matches.forEach(e=>{if(void 0!=e.outTeamScore&&void 0!=e.homeTeamScore){let t=e.getOutCome(),a=this.getTeam(e.homeTeamName),o=this.getTeam(e.outTeamName);t==r.HOME_TEAM_WINS?(a.points+=3,a.matchesWon++,o.matchesLost++):t==r.OUT_TEAM_WINS?(o.points+=3,o.matchesWon++,a.matchesLost++):(a.points+=1,o.points+=1,o.matchesDrawed++,a.matchesDrawed++),o.goalsScored+=e.outTeamScore,o.goalsConcieved+=e.homeTeamScore,a.goalsScored+=e.homeTeamScore,a.goalsConcieved+=e.outTeamScore}else this.allMatchesPlayed=!1}),this.teams.forEach(e=>{e.points=3*e.matchesWon+e.matchesDrawed})}getTeam(e){for(let t of this.teams)if(t.name==e)return t}printGroupStanding(){this.teams.forEach(e=>{console.log(`${e.name}  w:${e.matchesWon}  d:${e.matchesDrawed} l:${e.matchesLost} s:${e.goalsScored} c:${e.goalsConcieved} P:${e.points}`)}),console.log("All played: "+this.allMatchesPlayed)}printGroupMatches(){this.matches.forEach(e=>{console.log(`${e.homeTeamName} - ${e.outTeamName} : ${e.homeTeamScore} - ${e.outTeamScore}`)})}getEqualTeams(){return this.equalTeams}getAllMatchesPlayed(){return this.allMatchesPlayed}addToEqualTeams(e){if(0==this.getEqualTeams().length)this.equalTeams.push(e);else{var t=!1;for(var a of this.equalTeams){var o=0;for(var s of e){if(-1!=a.lastIndexOf(s))break;o++}if(2!=o){let s=1==o?0:1;a.push(e[s]),t=!0;break}}t||this.equalTeams.push(e)}}containsTeamWithName(e){for(var t of this.teams)if(t.name==e)return!0;return!1}deserialize(e){const t=new c;Object.assign(t,e);let a=[];t.teams.forEach(e=>{a.push(o.Team.deserialize(e))}),t.teams=a;let r=[];return t.matches.forEach(e=>{r.push(s.Match.deserialize(e))}),t.matches=r,t}}t.Group=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Tournament=class{constructor(){this.groups=[],this.rounds=[]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(6),s=a(2),r=a(5),c=a(4);function n(e,t){return e.points!=t.points?t.points-e.points:e.getGoalsDifference()!=t.getGoalsDifference()?t.getGoalsDifference()-e.getGoalsDifference():e.goalsScored!=t.goalsScored?t.goalsScored-e.goalsScored:0}function m(e,t){var a=new Array;e.forEach(e=>{a.push(e.name)});var o=new Array;return t.forEach(e=>{-1!=a.indexOf(e.homeTeamName)&&-1!=a.indexOf(e.outTeamName)&&o.push(Object.create(e))}),o}function u(e,t){var a=new r.Group;for(var o of(a.teams=[],e))a.teams.push(Object.create(o));for(var o of(a.matches=m(e,t.matches),a.teams))o.reset();return a}function i(e,t){var a=0;for(var o of e.teams){if(t.containsTeamWithName(o.name))break;a++}var s=function(e,t){var a=new r.Group;for(var o of(a.teams=[],t.teams)){var s=Object.assign({},e.getTeam(o.name));a.teams.push(s)}return a}(e,t);for(var c of s.teams)e.teams.splice(a,1,c),a++}t.getTournament=function(){console.log("***** Pronostiek generation Starting ****");let e=new o.Tournament,t=["A","B","C","D","E","F","G","H"];return[["Russia","Saudi Arabia","Egypt","Uruguay"],["Portugal","Spain","Morocco","Iran"],["France","Australia","Peru","Denmark"],["Argentina","Iceland","Croatia","Nigeria"],["Brazil","Switzerland","Costa Rica","Serbia"],["Germany","Mexico","Sweden","Korea Republic"],["Belgium","Panama","Tunisia","England"],["Poland","Senegal","Colombia","Japan"]].forEach((a,o)=>{let c=[];a.forEach(e=>{c.push(new s.Team(e))});let n=new r.Group("Groep "+t[o],c);e.groups.push(n)}),[{name:"Round of 16",numberOfMatches:8},{name:"Quarter Final",numberOfMatches:4},{name:"Semi Final",numberOfMatches:2},{name:"Final",numberOfMatches:1}].forEach(t=>{let a=new c.KnockOutRound(t.name,t.numberOfMatches);e.rounds.push(a)}),e},t.compareTeams=n,t.getMatchesFromTeams=m,t.getSubGroup=u,t.orderTeams=function e(t,a){if(t.groupNeedsDraw=!1,t.equalTeams=new Array,t.teams.sort((e,a)=>{var o=n(e,a);return 0==o&&t.addToEqualTeams([e,a]),o}),t.allMatchesPlayed&&t.equalTeams.length>0)if(t.equalTeams[0].length==t.teams.length)t.groupNeedsDraw=!0;else for(var o of t.equalTeams){var s=u(o,t);s.processMatches(),t.groupNeedsDraw||e(s,!1),s.groupNeedsDraw&&(t.groupNeedsDraw=!0),i(t,s)}},t.addToNextRound=function(e){const t=e.rounds[0];e.groups.forEach((a,o)=>{if(a.allMatchesPlayed){const a=e.groups[o].teams[0],s=e.groups[o].teams[1];o%2==0?(t.matches[o].homeTeamName=a.name,t.matches[o+1].outTeamName=s.name):(t.matches[o].homeTeamName=a.name,t.matches[o-1].outTeamName=s.name)}})},t.addToNextKnockoutRound=function(e,t,a,o){if(3==t)return;let s,r=!0;0==t?(0==a||2==a?s=0:1==a||3==a?s=1:4==a||6==a?s=2:5!=a&&7!=a||(s=3),2!=a&&3!=a&&6!=a&&7!=a||(r=!1)):1==t?(s=0==a||2==a?0:1,2!=a&&3!=a||(r=!1)):(s=0,1==a&&(r=!1));let c=e.rounds[t+1].matches[s];r?c.homeTeamName=o:c.outTeamName=o},t.replaceBasedOnName=function(e,t){t[function(e,t){for(let a in t)if(t[a].groupname==e.groupname)return a}(e,t)]=e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(7),s=a(3);describe("this will test the processing of the group matches:",function(){let e=o.getTournament();it("tournament should contain group1 A",function(){expect(e.groups[0].groupname).toEqual("Groep A")}),s.setGroupMatchScores(e),e.groups[0].processMatches();let t=e.groups[0].teams[0];it("team A has 3 points",function(){expect(t.points).toEqual(4)}),it("team C has 1 points",function(){expect(e.groups[0].teams[2].points).toEqual(2)}),it("team D has 2 points",function(){expect(e.groups[0].teams[3].points).toEqual(2)}),it("team A has scored 3 goals",function(){expect(t.goalsScored).toBe(6)}),it("team A has concieved 4 goals",function(){expect(t.goalsConcieved).toBe(4)}),it("team A has 1 drawed match",function(){expect(t.matchesDrawed).toBe(1)}),it("team A has 1 won match",function(){expect(t.matchesWon).toBe(1)})}),describe("this will test the processing of the group matches:",function(){var e=o.getTournament();s.setGroupMatchScores(e);var t=e.groups[0];t.processMatches(),o.orderTeams(t),it("Russia first",function(){expect(t.teams[0].name).toEqual("Russia")}),it("Egypt second ",function(){expect(t.teams[1].name).toEqual("Egypt")}),it("Uruguay last",function(){expect(t.teams[2].name).toEqual("Uruguay")}),it("Saudi Arabia third",function(){expect(t.teams[3].name).toEqual("Saudi Arabia")}),console.log("group A: "+t);var a=t.getEqualTeams();it("Egypt an Uruguay are concidered equal",function(){expect(a[0].length).toBe(2);let e="Egypt"==a[0][0].name||"Uruguay"==a[0][0].name,t="Egypt"==a[0][1].name||"Uruguay"==a[0][1].name;expect(e).toBeTruthy(),expect(t).toBeTruthy()})}),describe("we want to be able to select a subset of matches",function(){var e=o.getTournament().groups[0],t=o.getMatchesFromTeams([e.teams[1],e.teams[2],e.teams[3]],e.matches);it("we expect 3 matches to be selected",function(){expect(t.length).toBe(3)})}),describe("If 3 Teams are equal we need make a difference between them",function(){var e=o.getTournament();s.setGroupMatchScore3EqualTeams(e);var t=e.groups[0];t.processMatches(),o.orderTeams(t),it("we expect 3 teams to be equal",function(){expect(t.getEqualTeams().length).toBe(1),expect(t.getEqualTeams()[0].length).toBe(3)}),it("Russia should be first",function(){expect(t.teams[0].name).toBe("Russia")}),it("Saudi Arabia should be second",function(){expect(t.teams[1].name).toBe("Saudi Arabia")}),it("Uruguay should be third",function(){expect(t.teams[2].name).toBe("Uruguay")}),it("Egypt should be last",function(){expect(t.teams[3].name).toBe("Egypt")})}),describe("If 2 on 2 Teams are equal we need make a difference between them",function(){var e=o.getTournament();s.setGroupMatchScore2on2EqualTeamsWithDifferenceBetween(e);var t=e.groups[1];t.processMatches(),o.orderTeams(t,!0),it("we expect 2 teams to be equal",function(){expect(t.getEqualTeams().length).toBe(2),expect(t.getEqualTeams()[0].length).toBe(2),expect(t.getEqualTeams()[1].length).toBe(2)})}),describe("it should add teams to next knockoutround",function(){var e=o.getTournament();o.addToNextKnockoutRound(e,0,0,"winners"),it("should have added to first",function(){expect(e.rounds[1].matches[0].homeTeamName).toBe("winners")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvQ29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFyZWQvbW9kZWxzL3Byb25vc3RpZWsvTWF0Y2gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvcHJvbm9zdGllay9UZWFtLnRzIiwid2VicGFjazovLy8uL3Rlc3QvU3BlY0hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvcHJvbm9zdGllay9Lbm9ja091dFJvdW5kLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFyZWQvbW9kZWxzL3Byb25vc3RpZWsvR3JvdXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvcHJvbm9zdGllay9Ub3VybmFtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFyZWQvdXRpbHMvVG91cm5hbWVudFV0aWxzLnRzIiwid2VicGFjazovLy8uL3Rlc3QvaW5kZXguc3BlYy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiSE9NRV9URUFNX1dJTlMiLCJPVVRfVEVBTV9XSU5TIiwiTUFUQ0hfSVNfRFJBVyIsIkNPT0tJRV9OQU1FIiwiQ29uc3RhbnRzXzEiLCJNYXRjaCIsIltvYmplY3QgT2JqZWN0XSIsImhvbWVUZWFtTmFtZSIsIm91dFRlYW1OYW1lIiwidGhpcyIsImhvbWVUZWFtU2NvcmUiLCJ1bmRlZmluZWQiLCJvdXRUZWFtU2NvcmUiLCJpbnB1dCIsImFzc2lnbiIsIktub2Nrb3V0TWF0Y2giLCJob21lVGVhbVBlbmFsdHlTY29yZSIsIm91dFRlYW1QZW5hbHR5U2NvcmUiLCJob21lVGVhbVdpbnMiLCJvdXRUZWFtV2lucyIsIlRlYW0iLCJwb2ludHMiLCJtYXRjaGVzV29uIiwibWF0Y2hlc0xvc3QiLCJtYXRjaGVzRHJhd2VkIiwiZ29hbHNTY29yZWQiLCJnb2Fsc0NvbmNpZXZlZCIsInN1Ykdyb3VwSW5kZXgiLCJ0ZWFtIiwiTnVtYmVyIiwic2V0R3JvdXBNYXRjaFNjb3JlcyIsInRvdXJuYW1lbnQiLCJncm91cEEiLCJncm91cHMiLCJtYXRjaGVzIiwic2V0R3JvdXBNYXRjaFNjb3JlMkZ1bGx5RXF1YWxUZWFtcyIsInNldEdyb3VwTWF0Y2hTY29yZTNFcXVhbFRlYW1zIiwic2V0R3JvdXBNYXRjaFNjb3JlMm9uMkVxdWFsVGVhbXNXaXRoRGlmZmVyZW5jZUJldHdlZW4iLCJncm91cEIiLCJNYXRjaF8xIiwiS25vY2tPdXRSb3VuZCIsIm51bWJlck9mTWF0Y2hlcyIsInB1c2giLCJUZWFtXzEiLCJHcm91cCIsImdyb3VwbmFtZSIsInRlYW1zIiwiYWxsTWF0Y2hlc1BsYXllZCIsImdyb3VwTmVlZHNEcmF3IiwiaW5pdE1hdGNoZXMiLCJmb3JFYWNoIiwicmVzZXQiLCJtYXRjaCIsIm1hdGNoT3V0Q29tZSIsImdldE91dENvbWUiLCJob21lVGVhbSIsImdldFRlYW0iLCJvdXRUZWFtIiwiY29uc29sZSIsImxvZyIsImVxdWFsVGVhbXMiLCJ0ZWFtc1RvQWRkIiwiZ2V0RXF1YWxUZWFtcyIsImxlbmd0aCIsImFkZGVkIiwiYWxyZWFkeUFkZGVkVGVhbXMiLCJpbmRleE9mRXhpc3RpbmdUZWFtIiwidGVhbVRvQWRkIiwibGFzdEluZGV4T2YiLCJpbmRleE9mVGVhbVRvQWRkIiwiZ3JvdXAiLCJuZXdUZWFtcyIsImRlc2VyaWFsaXplIiwibmV3TWF0Y2hlcyIsIlRvdXJuYW1lbnQiLCJyb3VuZHMiLCJUb3VybmFtZW50XzEiLCJHcm91cF8xIiwiS25vY2tPdXRSb3VuZF8xIiwiY29tcGFyZVRlYW1zIiwidGVhbWEiLCJ0ZWFtYiIsImdldEdvYWxzRGlmZmVyZW5jZSIsImdldE1hdGNoZXNGcm9tVGVhbXMiLCJhbGxNYXRjaGVzIiwidGVhbU5hbWVzIiwiQXJyYXkiLCJyZXR1cm5WYWwiLCJpbmRleE9mIiwiY3JlYXRlIiwiZ2V0U3ViR3JvdXAiLCJvcmlnaW5hbEdyb3VwIiwidCIsIm9yZGVyQWNjb3JkaW5nVG9TdWJHcm91cHMiLCJzdWJHcm91cCIsImluZGV4IiwiY29udGFpbnNUZWFtV2l0aE5hbWUiLCJzdWJHcm91cFRlYW0iLCJnZXRTdWJHcm91cEZyb21PcmlnaW5hbEdyb3VwIiwic3BsaWNlIiwiZ2V0VG91cm5hbWVudCIsImdyb3VwTGV0dGVyIiwiZ3JvdXBUZWFtc05hbWVzIiwidGVhbU5hbWUiLCJyb3VuZERhdGEiLCJrbm9ja091dFJvdW5kIiwib3JkZXJUZWFtcyIsImNvbXBsZXRlIiwic29ydCIsIl8iLCJhZGRUb0VxdWFsVGVhbXMiLCJlcXVhbFRlYW1zU3ViR3JvdXAiLCJzdWJncm91cCIsInByb2Nlc3NNYXRjaGVzIiwiYWRkVG9OZXh0Um91bmQiLCJhY2hzdGVGaW5hbGVzIiwiZ3JvdXBJbmRleCIsImdyb3VwV2lubmVyIiwiZ3JvdXBSdW5uZXJVcCIsImFkZFRvTmV4dEtub2Nrb3V0Um91bmQiLCJyb3VuZEluZGV4IiwibWF0Y2hJbmRleCIsIndpbm5pbmdUZWFtIiwibWF0Y2hJbmRleFRvQWRkVG8iLCJtYXRjaFRvQWRkVG8iLCJyZXBsYWNlQmFzZWRPbk5hbWUiLCJuZXdHcm91cCIsImdyb3VwVG9GaW5kIiwiZmluZEluZGV4T2ZHcm91cEJhc2VkT25OYW1lIiwiVG91cm5hbWVudFV0aWxzXzEiLCJTcGVjSGVscGVyc18xIiwiZGVzY3JpYmUiLCJpdCIsImV4cGVjdCIsInRvRXF1YWwiLCJ0ZWFt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SixLQUFLLFlBR3RDSixHQUFHLGdDQUFpQyxXQUNoQ0MsT0FBT3JHLEVBQU9jLE1BQU0sR0FBR2hFLE1BQU0wSixLQUFLLGtCQUV0Q0osR0FBRywwQkFBMkIsV0FDMUJDLE9BQU9yRyxFQUFPYyxNQUFNLEdBQUdoRSxNQUFNMEosS0FBSyxhQUV0Q0osR0FBRyx1QkFBd0IsV0FDdkJDLE9BQU9yRyxFQUFPYyxNQUFNLEdBQUdoRSxNQUFNMEosS0FBSyxhQU8xQ0wsU0FBUyxtRUFBb0UsV0FFekUsSUFBSXBHLEVBQWFrRyxFQUFBN0IsZ0JBRWpCOEIsRUFBQTdGLHNEQUFzRE4sR0FFdEQsSUFBSU8sRUFBU1AsRUFBV0UsT0FBTyxHQUMvQkssRUFBTzJFLGlCQUNQZ0IsRUFBQXZCLFdBQVdwRSxHQUFRLEdBR25COEYsR0FBRyxnQ0FBaUMsV0FDaENDLE9BQU8vRixFQUFPd0IsZ0JBQWdCQyxRQUFReUUsS0FBSyxHQUMzQ0gsT0FBTy9GLEVBQU93QixnQkFBZ0IsR0FBR0MsUUFBUXlFLEtBQUssR0FDOUNILE9BQU8vRixFQUFPd0IsZ0JBQWdCLEdBQUdDLFFBQVF5RSxLQUFLLE9BS3RETCxTQUFTLDRDQUE2QyxXQUNsRCxJQUFJcEcsRUFBYWtHLEVBQUE3QixnQkFFakI2QixFQUFBVix1QkFBdUJ4RixFQUFZLEVBQUcsRUFEbEIsV0FFcEJxRyxHQUFHLDZCQUE4QixXQUM3QkMsT0FBT3RHLEVBQVc0QyxPQUFPLEdBQUd6QyxRQUFRLEdBQUczQixjQUFjaUksS0FIckMiLCJmaWxlIjoiQXBwU3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOCk7XG4iLCJleHBvcnQgY29uc3QgSE9NRV9URUFNX1dJTlMgOiBudW1iZXIgPSAgMTtcbmV4cG9ydCBjb25zdCBPVVRfVEVBTV9XSU5TIDogbnVtYmVyID0gIDI7XG5leHBvcnQgY29uc3QgTUFUQ0hfSVNfRFJBVyA6IG51bWJlcj0gIDA7XG5cbmV4cG9ydCBjb25zdCBDT09LSUVfTkFNRSA6IHN0cmluZyA9IFwial91aWRcIjtcbiIsImltcG9ydCB7VGVhbX0gZnJvbSBcIi4vVGVhbVwiO1xuaW1wb3J0IHsgSE9NRV9URUFNX1dJTlMsIE1BVENIX0lTX0RSQVcsIE9VVF9URUFNX1dJTlN9IGZyb20gXCIuLi9Db25zdGFudHNcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGNoe1xuICAgIGhvbWVUZWFtTmFtZSA6IHN0cmluZztcbiAgICBvdXRUZWFtTmFtZTogc3RyaW5nO1xuICAgIGhvbWVUZWFtU2NvcmU6IG51bWJlciA9IHVuZGVmaW5lZDtcbiAgICBvdXRUZWFtU2NvcmU6IG51bWJlciA9IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0cnVjdG9yKGhvbWVUZWFtTmFtZTogc3RyaW5nLCBvdXRUZWFtTmFtZSA6IHN0cmluZyl7XG4gICAgICAgIHRoaXMuaG9tZVRlYW1OYW1lID0gaG9tZVRlYW1OYW1lO1xuICAgICAgICB0aGlzLm91dFRlYW1OYW1lID0gb3V0VGVhbU5hbWU7XG4gICAgfVxuXG4gICAgZ2V0T3V0Q29tZSgpIDogbnVtYmVyIHtcbiAgICAgICAgaWYodGhpcy5ob21lVGVhbVNjb3JlID4gdGhpcy5vdXRUZWFtU2NvcmUpe1xuICAgICAgICAgICAgcmV0dXJuIEhPTUVfVEVBTV9XSU5TO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5vdXRUZWFtU2NvcmUgPiB0aGlzLmhvbWVUZWFtU2NvcmUpe1xuICAgICAgICAgICAgcmV0dXJuIE9VVF9URUFNX1dJTlM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1BVENIX0lTX0RSQVc7XG4gICAgfVxuXG4gICAgc3RhdGljIGRlc2VyaWFsaXplKGlucHV0OiBhbnkpIDogTWF0Y2gge1xuICAgICAgICBjb25zdCBtID0gbmV3IE1hdGNoKGlucHV0LmhvbWVUZWFtTmFtZSwgaW5wdXQub3V0VGVhbU5hbWUpO1xuICAgICAgICBPYmplY3QuYXNzaWduKG0sIGlucHV0KTtcbiAgICAgICAgcmV0dXJuIG07XG5cbiAgICB9XG5cblxufVxuXG5leHBvcnQgY2xhc3MgS25vY2tvdXRNYXRjaCBleHRlbmRzIE1hdGNoIHtcbiAgICBcbiAgICBob21lVGVhbVBlbmFsdHlTY29yZSA6IG51bWJlciA9IHVuZGVmaW5lZDtcbiAgICBvdXRUZWFtUGVuYWx0eVNjb3JlOiBudW1iZXIgPSB1bmRlZmluZWQ7XG4gICAgaG9tZVRlYW1XaW5zOiBib29sZWFuID0gZmFsc2U7XG4gICAgb3V0VGVhbVdpbnM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGdldE91dENvbWUoKSA6IG51bWJlciB7XG5cbiAgICAgICAgaWYodGhpcy5ob21lVGVhbVdpbnMpe1xuICAgICAgICAgICAgcmV0dXJuIEhPTUVfVEVBTV9XSU5TO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5vdXRUZWFtV2lucyl7XG4gICAgICAgICAgICByZXR1cm4gT1VUX1RFQU1fV0lOUztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTUFUQ0hfSVNfRFJBVztcbiAgICB9XG59IiwiaW1wb3J0IHtHcm91cH0gZnJvbSBcIi4vR3JvdXBcIjtcblxuZXhwb3J0IGNsYXNzIFRlYW0ge1xuXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgICBwb2ludHM6IG51bWJlciA9IDAgO1xuICAgIG1hdGNoZXNXb246IG51bWJlciA9IDAgO1xuICAgIG1hdGNoZXNMb3N0OiBudW1iZXIgPSAwO1xuICAgIG1hdGNoZXNEcmF3ZWQ6IG51bWJlciA9IDA7XG4gICAgZ29hbHNTY29yZWQ6IG51bWJlciA9IDA7XG4gICAgZ29hbHNDb25jaWV2ZWQ6IG51bWJlciA9IDA7XG4gICAgc3ViR3JvdXBJbmRleDogbnVtYmVyID0gMDtcblxuXG4gICAgY29uc3RydWN0b3IobmFtZTpzdHJpbmcpe1xuICAgICAgICB0aGlzLm5hbWUgPSAgbmFtZTtcbiAgICB9XG5cblxuXG4gICAgcmVzZXQoKSA6dm9pZCB7XG5cbiAgICAgICAgdGhpcy5wb2ludHMgPSAwO1xuXG4gICAgICAgIHRoaXMubWF0Y2hlc0RyYXdlZCA9IDA7XG4gICAgICAgIHRoaXMubWF0Y2hlc1dvbiA9IDA7XG4gICAgICAgIHRoaXMubWF0Y2hlc0xvc3QgPSAwO1xuXG4gICAgICAgIHRoaXMuZ29hbHNTY29yZWQgPSAwO1xuICAgICAgICB0aGlzLmdvYWxzQ29uY2lldmVkID0gMDtcbiAgICAgICAgdGhpcy5zdWJHcm91cEluZGV4ID0gMDtcbiAgICB9XG5cbiAgICBnZXRHb2Fsc0RpZmZlcmVuY2UoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmdvYWxzU2NvcmVkIC0gdGhpcy5nb2Fsc0NvbmNpZXZlZDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVzZXJpYWxpemUoaW5wdXQ6IGFueSkgOiBUZWFtIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGlucHV0Lm5hbWU7XG4gICAgICAgIGNvbnN0IHRlYW0gPSBuZXcgVGVhbShuYW1lKTtcbiAgICAgICAgLypPYmplY3QuYXNzaWduKFRlYW0sIGlucHV0KTtcbiAgICAgICAgY29uc29sZS5sb2codGVhbSk7Ki9cbiAgICAgICAgdGVhbS5wb2ludHMgPSAgTnVtYmVyKGlucHV0LnBvaW50cyk7XG4gICAgICAgIHRlYW0ubWF0Y2hlc1dvbiA9IE51bWJlcihpbnB1dC5tYXRjaGVzV29uKTtcbiAgICAgICAgdGVhbS5tYXRjaGVzTG9zdCA9IE51bWJlcihpbnB1dC5tYXRjaGVzTG9zdCk7XG4gICAgICAgIHRlYW0ubWF0Y2hlc0RyYXdlZCA9IE51bWJlcihpbnB1dC5tYXRjaGVzRHJhd2VkKTtcbiAgICAgICAgdGVhbS5nb2Fsc1Njb3JlZCA9IE51bWJlcihpbnB1dC5nb2Fsc1Njb3JlZCk7XG4gICAgICAgIHRlYW0uZ29hbHNDb25jaWV2ZWQgPSBOdW1iZXIoaW5wdXQuZ29hbHNDb25jaWV2ZWQpO1xuICAgICAgICB0ZWFtLnN1Ykdyb3VwSW5kZXggPSBOdW1iZXIoaW5wdXQuc3ViR3JvdXBJbmRleCk7XG4gICAgICAgIHJldHVybiB0ZWFtO1xuXG4gICAgfVxuXG5cbn0iLCJpbXBvcnQge1RvdXJuYW1lbnR9IGZyb20gXCIuLi9zcmMvc2hhcmVkL21vZGVscy9wcm9ub3N0aWVrL1RvdXJuYW1lbnRcIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gc2V0R3JvdXBNYXRjaFNjb3Jlcyh0b3VybmFtZW50OiBUb3VybmFtZW50KSA6dm9pZCB7XG4gICAgdmFyIGdyb3VwQSA9ICB0b3VybmFtZW50Lmdyb3Vwc1swXTtcbiAgICBncm91cEEubWF0Y2hlc1swXS5vdXRUZWFtU2NvcmUgPSAxO1xuICAgIGdyb3VwQS5tYXRjaGVzWzBdLmhvbWVUZWFtU2NvcmUgPSAzO1xuXG4gICAgZ3JvdXBBLm1hdGNoZXNbMV0ub3V0VGVhbVNjb3JlID0gMDtcbiAgICBncm91cEEubWF0Y2hlc1sxXS5ob21lVGVhbVNjb3JlID0gMDtcblxuXG4gICAgZ3JvdXBBLm1hdGNoZXNbMl0ub3V0VGVhbVNjb3JlID0gMztcbiAgICBncm91cEEubWF0Y2hlc1syXS5ob21lVGVhbVNjb3JlID0gMztcblxuICAgIGdyb3VwQS5tYXRjaGVzWzNdLm91dFRlYW1TY29yZSA9IDM7XG4gICAgZ3JvdXBBLm1hdGNoZXNbM10uaG9tZVRlYW1TY29yZSA9IDM7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyb3VwTWF0Y2hTY29yZTJGdWxseUVxdWFsVGVhbXModG91cm5hbWVudCA6IFRvdXJuYW1lbnQpIDp2b2lke1xuICAgIHNldEdyb3VwTWF0Y2hTY29yZXModG91cm5hbWVudCk7XG5cbiAgICB2YXIgZ3JvdXBBID0gIHRvdXJuYW1lbnQuZ3JvdXBzWzBdO1xuXG4gICAgZ3JvdXBBLm1hdGNoZXNbNF0ub3V0VGVhbVNjb3JlID0gMztcbiAgICBncm91cEEubWF0Y2hlc1s0XS5ob21lVGVhbVNjb3JlID0gMztcblxuICAgIGdyb3VwQS5tYXRjaGVzWzVdLm91dFRlYW1TY29yZSA9IDM7XG4gICAgZ3JvdXBBLm1hdGNoZXNbNV0uaG9tZVRlYW1TY29yZSA9IDM7XG5cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0R3JvdXBNYXRjaFNjb3JlM0VxdWFsVGVhbXModG91cm5hbWVudCA6IFRvdXJuYW1lbnQpIDogdm9pZCB7XG4gICAgLy9zZXRHcm91cE1hdGNoU2NvcmVzKHRvdXJuYW1lbnQpO1xuICAgIHZhciBncm91cEEgPSB0b3VybmFtZW50Lmdyb3Vwc1swXTtcblxuICAgIGdyb3VwQS5tYXRjaGVzWzBdLm91dFRlYW1TY29yZSA9IDA7XG4gICAgZ3JvdXBBLm1hdGNoZXNbMF0uaG9tZVRlYW1TY29yZSA9IDQ7XG5cbiAgICBncm91cEEubWF0Y2hlc1sxXS5vdXRUZWFtU2NvcmUgPSAwO1xuICAgIGdyb3VwQS5tYXRjaGVzWzFdLmhvbWVUZWFtU2NvcmUgPSAxO1xuXG4gICAgZ3JvdXBBLm1hdGNoZXNbMl0ub3V0VGVhbVNjb3JlID0gMTtcbiAgICBncm91cEEubWF0Y2hlc1syXS5ob21lVGVhbVNjb3JlID0gMztcblxuICAgIGdyb3VwQS5tYXRjaGVzWzNdLm91dFRlYW1TY29yZSA9IDA7XG4gICAgZ3JvdXBBLm1hdGNoZXNbM10uaG9tZVRlYW1TY29yZSA9IDE7XG5cbiAgICBncm91cEEubWF0Y2hlc1s0XS5vdXRUZWFtU2NvcmUgPSA0O1xuICAgIGdyb3VwQS5tYXRjaGVzWzRdLmhvbWVUZWFtU2NvcmUgPSAxO1xuXG4gICAgZ3JvdXBBLm1hdGNoZXNbNV0ub3V0VGVhbVNjb3JlID0gMDtcbiAgICBncm91cEEubWF0Y2hlc1s1XS5ob21lVGVhbVNjb3JlID0gMjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyb3VwTWF0Y2hTY29yZTJvbjJFcXVhbFRlYW1zV2l0aERpZmZlcmVuY2VCZXR3ZWVuKHRvdXJuYW1lbnQgOiBUb3VybmFtZW50KSA6IHZvaWQge1xuICAgIC8vc2V0R3JvdXBNYXRjaFNjb3Jlcyh0b3VybmFtZW50KTtcbiAgICB2YXIgZ3JvdXBCID0gdG91cm5hbWVudC5ncm91cHNbMV07XG5cbiAgICBncm91cEIubWF0Y2hlc1swXS5ob21lVGVhbVNjb3JlID0gMTtcbiAgICBncm91cEIubWF0Y2hlc1swXS5vdXRUZWFtU2NvcmUgPSA0O1xuXG4gICAgZ3JvdXBCLm1hdGNoZXNbMV0uaG9tZVRlYW1TY29yZSA9IDM7XG4gICAgZ3JvdXBCLm1hdGNoZXNbMV0ub3V0VGVhbVNjb3JlID0gMDtcblxuICAgIGdyb3VwQi5tYXRjaGVzWzJdLmhvbWVUZWFtU2NvcmUgPSA0O1xuICAgIGdyb3VwQi5tYXRjaGVzWzJdLm91dFRlYW1TY29yZSA9IDA7XG5cbiAgICBncm91cEIubWF0Y2hlc1szXS5ob21lVGVhbVNjb3JlID0gMztcbiAgICBncm91cEIubWF0Y2hlc1szXS5vdXRUZWFtU2NvcmUgPSAxO1xuXG4gICAgZ3JvdXBCLm1hdGNoZXNbNF0uaG9tZVRlYW1TY29yZSA9IDA7XG4gICAgZ3JvdXBCLm1hdGNoZXNbNF0ub3V0VGVhbVNjb3JlID0gMjtcblxuICAgIGdyb3VwQi5tYXRjaGVzWzVdLmhvbWVUZWFtU2NvcmUgPSAyO1xuICAgIGdyb3VwQi5tYXRjaGVzWzVdLm91dFRlYW1TY29yZSA9IDA7XG5cbn0iLCJpbXBvcnQge0tub2Nrb3V0TWF0Y2h9IGZyb20gXCIuL01hdGNoXCI7XG5cbmV4cG9ydCBjbGFzcyBLbm9ja091dFJvdW5kIHtcblxuICAgIG5hbWU6IHN0cmluZztcbiAgICBtYXRjaGVzOiBLbm9ja291dE1hdGNoW107XG4gICAgbnVtYmVyT2ZQbGFjZXM6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgbnVtYmVyT2ZNYXRjaGVzIDogbnVtYmVyKXtcbiAgICAgICAgdGhpcy5uYW1lID0gIG5hbWU7XG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IFtdO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZNYXRjaGVzOyBpKyspe1xuICAgICAgICAgICAgdGhpcy5tYXRjaGVzLnB1c2gobmV3IEtub2Nrb3V0TWF0Y2godW5kZWZpbmVkLCB1bmRlZmluZWQpKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCB7VGVhbX0gZnJvbSBcIi4vVGVhbVwiO1xuaW1wb3J0IHtNYXRjaH0gZnJvbSBcIi4vTWF0Y2hcIjtcbmltcG9ydCB7SE9NRV9URUFNX1dJTlMsIE9VVF9URUFNX1dJTlN9IGZyb20gXCIuLi9Db25zdGFudHNcIjtcblxuZXhwb3J0ICBjbGFzcyBHcm91cCB7XG5cbiAgICBncm91cG5hbWUgOiBzdHJpbmc7XG4gICAgdGVhbXMgOiBUZWFtW107XG4gICAgbWF0Y2hlcyA6IE1hdGNoW107XG4gICAgYWxsTWF0Y2hlc1BsYXllZCA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgZ3JvdXBOZWVkc0RyYXcgOiBib29sZWFuID0gZmFsc2U7XG4gICAgIGVxdWFsVGVhbXMgOiBUZWFtW11bXTtcblxuICAgIGNvbnN0cnVjdG9yKGdyb3VwbmFtZT86c3RyaW5nLCB0ZWFtcz86IFRlYW1bXSl7XG4gICAgICAgIHRoaXMuZ3JvdXBuYW1lID1ncm91cG5hbWU7XG4gICAgICAgIHRoaXMudGVhbXMgPSB0ZWFtcztcbiAgICAgICAgaWYodGhpcy50ZWFtcyl7XG4gICAgICAgICAgICB0aGlzLmluaXRNYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRNYXRjaGVzKCkgOiAgdm9pZHtcblxuICAgICAgICB0aGlzLm1hdGNoZXMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaGVzLnB1c2gobmV3IE1hdGNoKHRoaXMudGVhbXNbMF0ubmFtZSwgdGhpcy50ZWFtc1sxXS5uYW1lKSk7XG4gICAgICAgIHRoaXMubWF0Y2hlcy5wdXNoKG5ldyBNYXRjaCh0aGlzLnRlYW1zWzJdLm5hbWUsIHRoaXMudGVhbXNbM10ubmFtZSkpO1xuXG4gICAgICAgIHRoaXMubWF0Y2hlcy5wdXNoKG5ldyBNYXRjaCh0aGlzLnRlYW1zWzBdLm5hbWUsIHRoaXMudGVhbXNbMl0ubmFtZSkpO1xuICAgICAgICB0aGlzLm1hdGNoZXMucHVzaChuZXcgTWF0Y2godGhpcy50ZWFtc1szXS5uYW1lLCB0aGlzLnRlYW1zWzFdLm5hbWUpKTtcblxuICAgICAgICB0aGlzLm1hdGNoZXMucHVzaChuZXcgTWF0Y2godGhpcy50ZWFtc1szXS5uYW1lLCB0aGlzLnRlYW1zWzBdLm5hbWUpKTtcbiAgICAgICAgdGhpcy5tYXRjaGVzLnB1c2gobmV3IE1hdGNoKHRoaXMudGVhbXNbMV0ubmFtZSwgdGhpcy50ZWFtc1syXS5uYW1lKSk7XG4gICAgfVxuXG4gICAgcHJvY2Vzc01hdGNoZXMoKSA6IHZvaWR7XG5cbiAgICAgICAgdGhpcy5hbGxNYXRjaGVzUGxheWVkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnRlYW1zLmZvckVhY2goKHRlYW0pID0+IHtcbiAgICAgICAgICAgdGVhbS5yZXNldCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1hdGNoZXMuZm9yRWFjaCgobWF0Y2gpID0+IHtcbiAgICAgICAgICAgIGlmKG1hdGNoLm91dFRlYW1TY29yZSAhPSB1bmRlZmluZWQgJiYgbWF0Y2guaG9tZVRlYW1TY29yZSAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIC8vdGhpcyBtZWFucyBtYXRjaCBpcyBwbGF5ZWQsIHNvIGxldCBkbyB3aGF0IHdlIG5lZWQgdG8gZG86XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoT3V0Q29tZSA9IG1hdGNoLmdldE91dENvbWUoKTtcbiAgICAgICAgICAgICAgICBsZXQgaG9tZVRlYW0gPSB0aGlzLmdldFRlYW0obWF0Y2guaG9tZVRlYW1OYW1lKTtcbiAgICAgICAgICAgICAgICBsZXQgb3V0VGVhbSA9IHRoaXMuZ2V0VGVhbShtYXRjaC5vdXRUZWFtTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYobWF0Y2hPdXRDb21lID09IEhPTUVfVEVBTV9XSU5TKXtcbiAgICAgICAgICAgICAgICAgICAgaG9tZVRlYW0ucG9pbnRzICs9IDM7XG4gICAgICAgICAgICAgICAgICAgIGhvbWVUZWFtLm1hdGNoZXNXb24rKztcbiAgICAgICAgICAgICAgICAgICAgb3V0VGVhbS5tYXRjaGVzTG9zdCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihtYXRjaE91dENvbWUgPT0gT1VUX1RFQU1fV0lOUyl7XG4gICAgICAgICAgICAgICAgICAgIG91dFRlYW0ucG9pbnRzICs9IDM7XG4gICAgICAgICAgICAgICAgICAgIG91dFRlYW0ubWF0Y2hlc1dvbisrO1xuICAgICAgICAgICAgICAgICAgICBob21lVGVhbS5tYXRjaGVzTG9zdCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbWVUZWFtLnBvaW50cyArPSAxO1xuICAgICAgICAgICAgICAgICAgICBvdXRUZWFtLnBvaW50cyArPSAxO1xuICAgICAgICAgICAgICAgICAgICBvdXRUZWFtLm1hdGNoZXNEcmF3ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgaG9tZVRlYW0ubWF0Y2hlc0RyYXdlZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRUZWFtLmdvYWxzU2NvcmVkICs9IG1hdGNoLm91dFRlYW1TY29yZTtcbiAgICAgICAgICAgICAgICBvdXRUZWFtLmdvYWxzQ29uY2lldmVkICs9IG1hdGNoLmhvbWVUZWFtU2NvcmU7XG4gICAgICAgICAgICAgICAgaG9tZVRlYW0uZ29hbHNTY29yZWQgKz0gbWF0Y2guaG9tZVRlYW1TY29yZTtcbiAgICAgICAgICAgICAgICBob21lVGVhbS5nb2Fsc0NvbmNpZXZlZCArPSBtYXRjaC5vdXRUZWFtU2NvcmU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsTWF0Y2hlc1BsYXllZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vaWYgYWxsIHBsYXllZCBtYXRjaGVzIGFyZSBkb25lLCB3ZSBwdXQgdGhlIHBvaW50czpcbiAgICAgICAgdGhpcy50ZWFtcy5mb3JFYWNoKCh0ZWFtKT0+e1xuICAgICAgICAgICAgdGVhbS5wb2ludHMgPSB0ZWFtLm1hdGNoZXNXb24qMyArIHRlYW0ubWF0Y2hlc0RyYXdlZDtcbiAgICAgICAgfSk7XG5cblxuICAgIH1cblxuICAgIC8vdGhpcyBnZXQgdGhlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHRlYW1uYW1lIHBhc3NlZCB0byB0aGUgbWV0aG9kOlxuICAgIGdldFRlYW0obmFtZTpzdHJpbmcpIDogVGVhbXtcbiAgICAgICAgZm9yIChsZXQgdGVhbSBvZiB0aGlzLnRlYW1zKXtcbiAgICAgICAgICAgIGlmKHRlYW0ubmFtZSA9PSBuYW1lKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpbnRHcm91cFN0YW5kaW5nKCkge1xuICAgICAgICB0aGlzLnRlYW1zLmZvckVhY2goKHRlYW0pID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RlYW0ubmFtZX0gIHc6JHt0ZWFtLm1hdGNoZXNXb259ICBkOiR7dGVhbS5tYXRjaGVzRHJhd2VkfSBsOiR7dGVhbS5tYXRjaGVzTG9zdH0gczoke3RlYW0uZ29hbHNTY29yZWR9IGM6JHt0ZWFtLmdvYWxzQ29uY2lldmVkfSBQOiR7dGVhbS5wb2ludHN9YClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIHBsYXllZDogXCIgKyB0aGlzLmFsbE1hdGNoZXNQbGF5ZWQpO1xuICAgIH1cblxuICAgIHByaW50R3JvdXBNYXRjaGVzKCl7XG4gICAgICAgIHRoaXMubWF0Y2hlcy5mb3JFYWNoKChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCR7bWF0Y2guaG9tZVRlYW1OYW1lfSAtICR7bWF0Y2gub3V0VGVhbU5hbWV9IDogJHttYXRjaC5ob21lVGVhbVNjb3JlfSAtICR7bWF0Y2gub3V0VGVhbVNjb3JlfWApO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldEVxdWFsVGVhbXMoKSA6IFRlYW1bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXF1YWxUZWFtcyA7XG4gICAgfVxuXG4gICAgZ2V0QWxsTWF0Y2hlc1BsYXllZCgpIDogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsbE1hdGNoZXNQbGF5ZWQ7XG4gICAgfVxuXG5cbiAgICBhZGRUb0VxdWFsVGVhbXModGVhbXNUb0FkZCA6IFRlYW1bXSkgOiB2b2lkIHtcbiAgICAgICAgaWYodGhpcy5nZXRFcXVhbFRlYW1zKCkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIC8vIGZpcnN0LCBqdXN0IGFkZCBpdDpcbiAgICAgICAgICAgIHRoaXMuZXF1YWxUZWFtcy5wdXNoKHRlYW1zVG9BZGQpO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB2YXIgYWRkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gY2hlY2sgaXMgb25lIG9mIHRoZSAyIHRlYW1zIGFscmVhZHkgaXMgaW4gb24gb2YgdGhlIGFycmF5cyB0aGF0IHdhcyBhbHJlYWR5IGFkZGVkOlxuICAgICAgICAgICAgZm9yKHZhciBhbHJlYWR5QWRkZWRUZWFtcyBvZiB0aGlzLmVxdWFsVGVhbXMpe1xuICAgICAgICAgICAgICAgIC8vY2hlY2sgaWYgaXQgY29udGFpbnMgb25lIG9mIHRoZW06XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4T2ZFeGlzdGluZ1RlYW0gPSAwO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgdGVhbVRvQWRkIG9mIHRlYW1zVG9BZGQpe1xuICAgICAgICAgICAgICAgICAgICAvL2lmIGl0IGFscmVhZHkgaW4gdGhlcmUsIGp1c3QgYWRkIHRoZSBvdGhlciBvbmUgYXMgd2VsbCBhbmQgd2UgYXJlIGRvbmU6XG4gICAgICAgICAgICAgICAgICAgIGlmKGFscmVhZHlBZGRlZFRlYW1zLmxhc3RJbmRleE9mKHRlYW1Ub0FkZCkgIT0gLTEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5kZXhPZkV4aXN0aW5nVGVhbSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2lmIHRoaXMgaXMgMiwgdGhpcyBtZWFucyB3ZSBkaWQgbm90IGZpbmQgdGhlIHRlYW0gaW4gYWxyZWFkeUFkZGVkVGVhbXNcbiAgICAgICAgICAgICAgICBpZihpbmRleE9mRXhpc3RpbmdUZWFtICE9IDIpe1xuICAgICAgICAgICAgICAgICAgICAvL2lmIGlzIDAgb3IgMSwgd2UgZm91bmQgaXMsIHNvIHdlIG5lZWQgdG8gYWRkIHRoZSBvdGhlciB0ZWFtLlxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXhPZlRlYW1Ub0FkZCA9IGluZGV4T2ZFeGlzdGluZ1RlYW0gPT0gMSA/IDAgOiAxO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGluZGV4T2ZUZWFtVG9BZGQpO1xuICAgICAgICAgICAgICAgICAgICBhbHJlYWR5QWRkZWRUZWFtcy5wdXNoKHRlYW1zVG9BZGRbaW5kZXhPZlRlYW1Ub0FkZF0pO1xuICAgICAgICAgICAgICAgICAgICBhZGRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYWRkZWQpe1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgbWVhbiB0ZWFtcyBhcmUgZXF1YWwgMiBvbiAyXG4gICAgICAgICAgICAgICAgdGhpcy5lcXVhbFRlYW1zLnB1c2godGVhbXNUb0FkZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgcHVyZWx5IGZvciBoZWxwaW5nIG1ldGhvZDpcbiAgICAgKi9cbiAgICAgY29udGFpbnNUZWFtV2l0aE5hbWUobmFtZTpTdHJpbmcpIDogYm9vbGVhbiB7XG4gICAgICAgIGZvcih2YXIgdGVhbSBvZiB0aGlzLnRlYW1zKXtcbiAgICAgICAgICAgIGlmKHRlYW0ubmFtZSA9PSBuYW1lKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBkZXNlcmlhbGl6ZShpbnB1dDogYW55KSA6IEdyb3VwIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gbmV3IEdyb3VwKCk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGdyb3VwLCBpbnB1dCk7XG5cbiAgICAgICAgICAgIGxldCBuZXdUZWFtczogVGVhbVtdID0gW107XG4gICAgICAgICAgICBncm91cC50ZWFtcy5mb3JFYWNoKHRlYW0gPT4ge1xuICAgICAgICAgICAgICAgICBuZXdUZWFtcy5wdXNoKFRlYW0uZGVzZXJpYWxpemUodGVhbSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncm91cC50ZWFtcyA9IG5ld1RlYW1zO1xuXG4gICAgICAgICAgICBsZXQgbmV3TWF0Y2hlczogTWF0Y2hbXSA9IFtdO1xuICAgICAgICAgICAgZ3JvdXAubWF0Y2hlcy5mb3JFYWNoKG1hdGNoICA9PiB7XG4gICAgICAgICAgICAgICAgbmV3TWF0Y2hlcy5wdXNoKE1hdGNoLmRlc2VyaWFsaXplKG1hdGNoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdyb3VwLm1hdGNoZXMgPSBuZXdNYXRjaGVzO1xuICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH1cblxuXG59XG5cblxuXG5cblxuIiwiaW1wb3J0IHtHcm91cH0gZnJvbSBcIi4vR3JvdXBcIjtcbmltcG9ydCB7S25vY2tPdXRSb3VuZH0gZnJvbSBcIi4vS25vY2tPdXRSb3VuZFwiO1xuXG5leHBvcnQgY2xhc3MgVG91cm5hbWVudHtcblxuICAgIGdyb3VwcyA6IEdyb3VwW10gPSAgW107XG4gICAgcm91bmRzIDogIEtub2NrT3V0Um91bmRbXSA9IFtdO1xuXG59IiwiaW1wb3J0IHsgVG91cm5hbWVudCB9IGZyb20gJy4vLi4vbW9kZWxzL3Byb25vc3RpZWsvVG91cm5hbWVudCc7XG5pbXBvcnQgeyBLbm9ja291dE1hdGNoIH0gZnJvbSAnLi8uLi9tb2RlbHMvcHJvbm9zdGllay9NYXRjaCc7XG5pbXBvcnQge1Byb25vc3RpZWt9IGZyb20gXCIuLi9tb2RlbHMvcHJvbm9zdGllay9Qcm9ub3N0aWVrXCI7XG5pbXBvcnQge1RlYW19IGZyb20gXCIuLi9tb2RlbHMvcHJvbm9zdGllay9UZWFtXCI7XG5pbXBvcnQge0dyb3VwfSBmcm9tIFwiLi4vbW9kZWxzL3Byb25vc3RpZWsvR3JvdXBcIjtcbmltcG9ydCB7TWF0Y2h9IGZyb20gXCIuLi9tb2RlbHMvcHJvbm9zdGllay9NYXRjaFwiO1xuaW1wb3J0IHtIT01FX1RFQU1fV0lOUywgT1VUX1RFQU1fV0lOU30gZnJvbSBcIi4uL21vZGVscy9Db25zdGFudHNcIjtcbmltcG9ydCB7S25vY2tPdXRSb3VuZH0gZnJvbSBcIi4uL21vZGVscy9wcm9ub3N0aWVrL0tub2NrT3V0Um91bmRcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvdXJuYW1lbnQoKSA6IFRvdXJuYW1lbnQge1xuXG4gICAgY29uc29sZS5sb2coXCIqKioqKiBQcm9ub3N0aWVrIGdlbmVyYXRpb24gU3RhcnRpbmcgKioqKlwiKTtcblxuICAgIGxldCB0b3VybmFtZW50IDogVG91cm5hbWVudCA9IG5ldyBUb3VybmFtZW50KCk7XG5cbiAgICBsZXQgYWxsVGVhbXMgPSAgW1xuICAgICAgICBbXCJSdXNzaWFcIiwgXCJTYXVkaSBBcmFiaWFcIiwgXCJFZ3lwdFwiLCBcIlVydWd1YXlcIl0sXG4gICAgICAgIFtcIlBvcnR1Z2FsXCIsIFwiU3BhaW5cIiwgXCJNb3JvY2NvXCIsIFwiSXJhblwiXSxcbiAgICAgICAgW1wiRnJhbmNlXCIsIFwiQXVzdHJhbGlhXCIsIFwiUGVydVwiLCBcIkRlbm1hcmtcIl0sXG4gICAgICAgIFtcIkFyZ2VudGluYVwiLCBcIkljZWxhbmRcIiwgXCJDcm9hdGlhXCIsIFwiTmlnZXJpYVwiXSxcbiAgICAgICAgW1wiQnJhemlsXCIsIFwiU3dpdHplcmxhbmRcIiwgXCJDb3N0YSBSaWNhXCIsIFwiU2VyYmlhXCJdLFxuICAgICAgICBbXCJHZXJtYW55XCIsIFwiTWV4aWNvXCIsIFwiU3dlZGVuXCIsIFwiS29yZWEgUmVwdWJsaWNcIl0sXG4gICAgICAgIFtcIkJlbGdpdW1cIiwgXCJQYW5hbWFcIiwgXCJUdW5pc2lhXCIsIFwiRW5nbGFuZFwiXSxcbiAgICAgICAgW1wiUG9sYW5kXCIsIFwiU2VuZWdhbFwiLCBcIkNvbG9tYmlhXCIsIFwiSmFwYW5cIl0sXG4gICAgXTtcblxuICAgIGxldCBncm91cExldHRlciA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIiwgXCJIXCJdO1xuXG4gICAgYWxsVGVhbXMuZm9yRWFjaCggKGdyb3VwVGVhbXNOYW1lcyxpbmRleCkgPT4ge1xuICAgICAgICBsZXQgdGVhbXM6IFRlYW1bXSA9IFtdO1xuICAgICAgICBncm91cFRlYW1zTmFtZXMuZm9yRWFjaCh0ZWFtTmFtZSA9PiB7XG4gICAgICAgICAgICB0ZWFtcy5wdXNoKG5ldyBUZWFtKHRlYW1OYW1lKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgZ3JvdXAgPSBuZXcgR3JvdXAgKFwiR3JvZXAgXCIgKyBncm91cExldHRlcltpbmRleF0sIHRlYW1zKTtcbiAgICAgICAgdG91cm5hbWVudC5ncm91cHMucHVzaChncm91cCk7XG4gICAgfSk7XG5cbiAgICBsZXQgcm91bmRzPVtcbiAgICAgICAge25hbWU6XCJSb3VuZCBvZiAxNlwiLG51bWJlck9mTWF0Y2hlczo4fSxcbiAgICAgICAge25hbWU6XCJRdWFydGVyIEZpbmFsXCIsbnVtYmVyT2ZNYXRjaGVzOjR9LFxuICAgICAgICB7bmFtZTpcIlNlbWkgRmluYWxcIixudW1iZXJPZk1hdGNoZXM6Mn0sXG4gICAgICAgIHtuYW1lOlwiRmluYWxcIixudW1iZXJPZk1hdGNoZXM6MX1cbiAgICAgICAgXTtcblxuICAgIHJvdW5kcy5mb3JFYWNoKChyb3VuZERhdGEpID0+IHtcbiAgICAgICAgbGV0IGtub2NrT3V0Um91bmQgPSBuZXcgS25vY2tPdXRSb3VuZChyb3VuZERhdGEubmFtZSwgcm91bmREYXRhLm51bWJlck9mTWF0Y2hlcyk7XG4gICAgICAgIHRvdXJuYW1lbnQucm91bmRzLnB1c2goa25vY2tPdXRSb3VuZCk7XG4gICAgfSk7XG5cblxuICAgIC8vIEZPUiBERVYgUFVSUE9TRVM6XG4gICAgLy8gdG91cm5hbWVudC5ncm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAvLyAgICAgZ3JvdXAubWF0Y2hlcy5mb3JFYWNoKChtYXRjaCxpbmRleCkgPT4ge1xuICAgIC8vICAgICAgICAgaWYoaW5kZXggPCA1KXtcbiAgICAvLyAgICAgICAgICAgICBtYXRjaC5ob21lVGVhbVNjb3JlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjUpO1xuICAgIC8vICAgICAgICAgICAgIG1hdGNoLm91dFRlYW1TY29yZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSo1KTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gICAgIGdyb3VwLnByb2Nlc3NNYXRjaGVzKCk7XG4gICAgLy8gfSk7XG4gICAgLy8gRU5EXG4gICAgXG4gICAgcmV0dXJuIHRvdXJuYW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlVGVhbXModGVhbWE6IFRlYW0sIHRlYW1iIDogVGVhbSkgOiBudW1iZXIge1xuXG4gICAgaWYodGVhbWEucG9pbnRzICE9IHRlYW1iLnBvaW50cyl7XG4gICAgICAgIC8vY29tcGFyZSBvbiBwb2ludHM6XG4gICAgICAgIHJldHVybiB0ZWFtYi5wb2ludHMgLSB0ZWFtYS5wb2ludHM7XG4gICAgfSBlbHNlIGlmKHRlYW1hLmdldEdvYWxzRGlmZmVyZW5jZSgpICE9IHRlYW1iLmdldEdvYWxzRGlmZmVyZW5jZSgpKXtcbiAgICAgICAgLy9jb21wYXJlIG9uIGdvYWwgZGlmZjpcbiAgICAgICAgcmV0dXJuIHRlYW1iLmdldEdvYWxzRGlmZmVyZW5jZSgpIC10ZWFtYS5nZXRHb2Fsc0RpZmZlcmVuY2UoKTtcbiAgICB9IGVsc2UgaWYodGVhbWEuZ29hbHNTY29yZWQgIT0gdGVhbWIuZ29hbHNTY29yZWQpe1xuICAgICAgICAvLyBvbiBnb2FscyBzY29yZWQ6XG4gICAgICAgIHJldHVybiB0ZWFtYi5nb2Fsc1Njb3JlZCAtIHRlYW1hLmdvYWxzU2NvcmVkO1xuICAgIH1cbiAgICByZXR1cm4gMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0Y2hlc0Zyb21UZWFtcyh0ZWFtcyA6IFRlYW1bXSwgYWxsTWF0Y2hlcyA6IE1hdGNoW10pIDogTWF0Y2hbXSB7XG4gICAgdmFyIHRlYW1OYW1lcyAgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xuICAgIHRlYW1zLmZvckVhY2goKHRlYW0pID0+IHtcbiAgICAgICB0ZWFtTmFtZXMucHVzaCh0ZWFtLm5hbWUpO1xuICAgIH0pO1xuXG4gICAgdmFyIHJldHVyblZhbCA6IE1hdGNoIFtdID0gbmV3IEFycmF5PE1hdGNoPigpO1xuICAgIGFsbE1hdGNoZXMuZm9yRWFjaCgobWF0Y2gpID0+IHtcbiAgICAgICBpZih0ZWFtTmFtZXMuaW5kZXhPZihtYXRjaC5ob21lVGVhbU5hbWUpICE9IC0xICYmIHRlYW1OYW1lcy5pbmRleE9mKG1hdGNoLm91dFRlYW1OYW1lKSAhPSAtMSl7XG4gICAgICAgICAgICAgcmV0dXJuVmFsLnB1c2goT2JqZWN0LmNyZWF0ZShtYXRjaCkpO1xuICAgICAgIH1cblxuICAgIH0pO1xuICAgIHJldHVybiByZXR1cm5WYWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWJHcm91cCh0ZWFtcyA6IFRlYW1bXSwgb3JpZ2luYWxHcm91cCA6IEdyb3VwKSA6ICBHcm91cCB7XG4gICAgIHZhciBncm91cCA9IG5ldyBHcm91cCgpO1xuICAgICBncm91cC50ZWFtcyA9IFtdXG4gICAgZm9yKHZhciB0IG9mIHRlYW1zKSB7XG4gICAgICAgICBncm91cC50ZWFtcy5wdXNoKE9iamVjdC5jcmVhdGUodCkpO1xuICAgIH1cbiAgICAvLyBncm91cC50ZWFtcyA9IHRlYW1zLnNsaWNlKCk7XG4gICAgIGdyb3VwLm1hdGNoZXMgPSBnZXRNYXRjaGVzRnJvbVRlYW1zKHRlYW1zLG9yaWdpbmFsR3JvdXAubWF0Y2hlcyApO1xuICAgICBmb3IodmFyIHQgb2YgZ3JvdXAudGVhbXMpe1xuICAgICAgICAgdC5yZXNldCgpO1xuICAgICB9XG4gICAgIHJldHVybiBncm91cDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gb3JkZXJUZWFtcyhncm91cCA6IEdyb3VwLCBjb21wbGV0ZT8gOiBib29sZWFuKSA6IHZvaWQge1xuICAgIC8vcmVzZXQgc29tZSBzdHVmZjpcbiAgICBncm91cC5ncm91cE5lZWRzRHJhdyA9IGZhbHNlO1xuICAgIGdyb3VwLmVxdWFsVGVhbXMgPSBuZXcgQXJyYXk8VGVhbVtdPigpO1xuICAgIGdyb3VwLnRlYW1zLnNvcnQoICh0ZWFtYSwgdGVhbWIpID0+IHtcbiAgICAgICAgdmFyIF8gPSAgY29tcGFyZVRlYW1zKHRlYW1hLCB0ZWFtYik7XG4gICAgICAgIGlmKCBfID09IDApe1xuICAgICAgICAgICAgLy8gdGhpcyBtZWFucyB0ZWFtIGEgYW5kIHRlYW0gYiBhcmUgY29uY2lkZXJlZCBlcXVhbDpcbiAgICAgICAgICAgIGdyb3VwLmFkZFRvRXF1YWxUZWFtcyhbdGVhbWEsIHRlYW1iXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG5cbiAgICAvL0lGIG5vdCBhbGwgbWF0Y2hlcyBhcmUgcGxheWVkLCB3ZSBjYW4gc2tpcHAgdGhlIHJlc3RcbiAgICBpZighZ3JvdXAuYWxsTWF0Y2hlc1BsYXllZCl7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9jaGVjayBpZiB0aGVyZSBhcmUgZXF1YWx0ZWFtcywgYW5kIGRvIHdoYXRzIG5lZWRlZDpcbiAgICBpZihncm91cC5lcXVhbFRlYW1zLmxlbmd0aCA+IDApe1xuICAgICAgICBpZihncm91cC5lcXVhbFRlYW1zWzBdLmxlbmd0aCA9PSBncm91cC50ZWFtcy5sZW5ndGgpe1xuICAgICAgICAgICAgLy90aGlzIG1lYW5zIGFsbCAgb2YgdGhlIHRlYW1zIHdlcmUgZXF1YWwsIHNvIHRoZXJlIGlzIG5vdGhpbmcgbW9yZSB0byBkbzpcbiAgICAgICAgICAgIGdyb3VwLmdyb3VwTmVlZHNEcmF3ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vd2UgbmVlZCB0byBtYWtlIGEgc3ViZ3JvdXAgYW5kIGRvIHRoZSBvcmRlcmluZyBhZ2FpbjpcbiAgICAgICAgICAgIGZvciAoIHZhciBlcXVhbFRlYW1zU3ViR3JvdXAgb2YgZ3JvdXAuZXF1YWxUZWFtcyl7XG4gICAgICAgICAgICAgICAgaWYoY29tcGxldGUgPT0gdW5kZWZpbmVkIHx8IGNvbXBsZXRlKXtcbiAgICAgICAgICAgICAgICAgICAvKiBjb25zb2xlLmxvZyhcIkJlZm9yZSBcIik7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLnByaW50R3JvdXBTdGFuZGluZygpO1xuICAgICAgICAgICAgICAgICAgICBncm91cC5wcmludEdyb3VwTWF0Y2hlcygpKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB2YXIgc3ViZ3JvdXAgPSBnZXRTdWJHcm91cChlcXVhbFRlYW1zU3ViR3JvdXAsIGdyb3VwKTtcbiAgICAgICAgICAgICAgICBzdWJncm91cC5wcm9jZXNzTWF0Y2hlcygpO1xuXG4gICAgICAgICAgICAgICAgLy93YXRjaCBvdXQgaGVyZSBmb3IgaW5maW5pdGUgbG9vcHMhISFcbiAgICAgICAgICAgICAgICAvKmlmIChjb21wbGV0ZSA9PSB1bmRlZmluZWQgfHwgY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJUZWFtcyhzdWJncm91cCxmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSovXG5cbiAgICAgICAgICAgICAgICBpZighZ3JvdXAuZ3JvdXBOZWVkc0RyYXcpe1xuICAgICAgICAgICAgICAgICAgICBvcmRlclRlYW1zKHN1Ymdyb3VwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoc3ViZ3JvdXAuZ3JvdXBOZWVkc0RyYXcpe1xuICAgICAgICAgICAgICAgICAgICBncm91cC5ncm91cE5lZWRzRHJhdyA9ICB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vYWZ0ZXIgdGhpcyBzdWJncm91cHMgaGF2ZSBiZWVuIG9yZGVyZWQsIHNvIG5vdyB3ZSBvcmRlciB0aGVtIGluXG4gICAgICAgICAgICAgICAgLy9zdWJncm91cC5wcmludEdyb3VwU3RhbmRpbmcoKTtcbiAgICAgICAgICAgICAgICBvcmRlckFjY29yZGluZ1RvU3ViR3JvdXBzKGdyb3VwLCBzdWJncm91cCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuICAgIGlmKGNvbXBsZXRlID09IHVuZGVmaW5lZCB8fCBjb21wbGV0ZSl7XG4gICAgICAgLyogY29uc29sZS5sb2coXCJGaW5hbCBwcmludFwiKTtcbiAgICAgICAgZ3JvdXAucHJpbnRHcm91cFN0YW5kaW5nKCk7XG4gICAgICAgIGdyb3VwLnByaW50R3JvdXBNYXRjaGVzKCkqL1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBvcmRlckFjY29yZGluZ1RvU3ViR3JvdXBzKGdyb3VwOiBHcm91cCwgc3ViR3JvdXAgOiBHcm91cCl7XG5cblxuICAgIC8vZmluZCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IHRlYW06XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICBmb3IodmFyIHRlYW0gb2YgZ3JvdXAudGVhbXMpe1xuICAgICAgICBpZihzdWJHcm91cC5jb250YWluc1RlYW1XaXRoTmFtZSh0ZWFtLm5hbWUpKXtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4KytcbiAgICB9XG5cbiAgICAvL2dldCBjb3BpZXMgb2YgdGhlIHRlYW1zXG4gICAgdmFyIHRlYW1zVG9BZGQgPSBnZXRTdWJHcm91cEZyb21PcmlnaW5hbEdyb3VwKGdyb3VwLHN1Ykdyb3VwKTtcblxuICAgIC8vdGhlIGZpcnN0IHRlYW0gaXMgaW4gcG9zaXRpb24gaW5kZXggaW4gdGhlIG9yaWdpbmFsIGdyb3VwXG4gICAgLy9zbyBub3cgc3RhcnQgcmVwbGFjaW5nIGZyb20gdGhlcmU6XG4gICAgZm9yKHZhciB0ZWFtVG9BZGQgb2YgdGVhbXNUb0FkZC50ZWFtcyl7XG4gICAgICAgIGdyb3VwLnRlYW1zLnNwbGljZShpbmRleCwgMSwgdGVhbVRvQWRkKTtcbiAgICAgICAgaW5kZXgrK1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBnZXRTdWJHcm91cEZyb21PcmlnaW5hbEdyb3VwIChvcmlnaW5hbEdyb3VwICA6IEdyb3VwLCBzdWJHcm91cCA6IEdyb3VwICkgOiAgR3JvdXB7XG4gICAgdmFyIHJldHVyblZhbCA6IEdyb3VwID0gbmV3IEdyb3VwKCk7XG4gICAgcmV0dXJuVmFsLnRlYW1zID0gW107XG4gICAgZm9yICh2YXIgc3ViR3JvdXBUZWFtICBvZiBzdWJHcm91cC50ZWFtcyl7XG4gICAgICAgIHZhciB0ZWFtVG9BZGQgPSBPYmplY3QuYXNzaWduKHt9LCBvcmlnaW5hbEdyb3VwLmdldFRlYW0oKHN1Ykdyb3VwVGVhbS5uYW1lKSkpO1xuICAgICAgICAvL3ZhciB0ZWFtVG9BZGQgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsR3JvdXAuZ2V0VGVhbShzdWJHcm91cFRlYW0ubmFtZSkpO1xuICAgICAgICByZXR1cm5WYWwudGVhbXMucHVzaCh0ZWFtVG9BZGQpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuVmFsO1xuXG59XG5cblxuLyogXG5XaW5uZXIgQSB2LiBSdW5uZXItdXAgQiA9IDEgLSAwXG5XaW5uZXIgQiB2LiBSdW5uZXItdXAgQSA9IDIgLSAxXG5XaW5uZXIgQyB2LiBSdW5uZXItdXAgRCA9IDMgXG5XaW5uZXIgRCB2LiBSdW5uZXItdXAgQyA9IDRcbldpbm5lciBFIHYuIFJ1bm5lci11cCBGID0gNVxuV2lubmVyIEYgdi4gUnVubmVyLXVwIEUgPSA2XG5XaW5uZXIgRyB2LiBSdW5uZXItdXAgSCA9IDdcbldpbm5lciBIIHYuIFJ1bm5lci11cCBHID0gOCBcbiovXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9OZXh0Um91bmQodG91cm5hbWVudCA6IFRvdXJuYW1lbnQpIHtcbiAgICBcbiAgICBjb25zdCBhY2hzdGVGaW5hbGVzID0gIHRvdXJuYW1lbnQucm91bmRzWzBdO1xuXG4gICAgdG91cm5hbWVudC5ncm91cHMuZm9yRWFjaCgoZ3JvdXAsIGdyb3VwSW5kZXgpID0+IHtcblxuICAgICAgICBpZihncm91cC5hbGxNYXRjaGVzUGxheWVkKXtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwV2lubmVyID0gdG91cm5hbWVudC5ncm91cHNbZ3JvdXBJbmRleF0udGVhbXNbMF07XG4gICAgICAgICAgICBjb25zdCBncm91cFJ1bm5lclVwID0gdG91cm5hbWVudC5ncm91cHNbZ3JvdXBJbmRleF0udGVhbXNbMV07XG4gICAgICAgIFxuICAgICAgICAgICAgaWYoZ3JvdXBJbmRleCUyID09IDApe1xuICAgICAgICAgICAgICAgIC8vZXZlbiBpbmRleCBzbyBncm91cCB3aW5uZXIgaW4gaG9tZSBpbmRleCwgcnVubmVydXAgaW4gb3V0IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICBhY2hzdGVGaW5hbGVzLm1hdGNoZXNbZ3JvdXBJbmRleF0uaG9tZVRlYW1OYW1lID0gZ3JvdXBXaW5uZXIubmFtZTtcbiAgICAgICAgICAgICAgICBhY2hzdGVGaW5hbGVzLm1hdGNoZXNbZ3JvdXBJbmRleCsxXS5vdXRUZWFtTmFtZSA9IGdyb3VwUnVubmVyVXAubmFtZTtcbiAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vb2RkIGluZGV4IHNvIGdyb3VwIHdpbm5lciBpbiBvdXQgaW5kZXgrMSwgcnVubmVydXAgaW4gaG9tZSBpbmRleDtcbiAgICAgICAgICAgICAgICBhY2hzdGVGaW5hbGVzLm1hdGNoZXNbZ3JvdXBJbmRleF0uaG9tZVRlYW1OYW1lID0gZ3JvdXBXaW5uZXIubmFtZTtcbiAgICAgICAgICAgICAgICBhY2hzdGVGaW5hbGVzLm1hdGNoZXNbZ3JvdXBJbmRleC0xXS5vdXRUZWFtTmFtZSA9IGdyb3VwUnVubmVyVXAubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5cbi8qXG4gICAgV2lubmVyIDEgdi4gV2lubmVyIDMgPSBBXG4gICAgV2lubmVyIDIgdi4gV2lubmVyIDQgPSBCXG4gICAgV2lubmVyIDUgdi4gV2lubmVyIDcgPSBDXG4gICAgV2lubmVyIDYgdi4gV2lubmVyIDggPSBEIFxuXG4gICAgU2VtaWVzOlxuICAgIFdpbm5lciAxIHYuIFdpbm5lciAzXG4gICAgV2lubmVyIDIgdi4gV2lubmVyIDRcblxuXG5cbiovXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9OZXh0S25vY2tvdXRSb3VuZCh0b3VybmFtZW50OiBUb3VybmFtZW50LCByb3VuZEluZGV4IDogbnVtYmVyLCBtYXRjaEluZGV4OiBudW1iZXIgLCB3aW5uaW5nVGVhbTogc3RyaW5nKXtcblxuICAgIGlmKHJvdW5kSW5kZXggPT0gMyl7XG4gICAgICAgLy8gdGhpcyBpcyB0aGUgZmluYWxcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBtYXRjaEluZGV4VG9BZGRUbzsgXG4gICAgbGV0IGhvbWVUZWFtID0gdHJ1ZVxuICAgIGlmKHJvdW5kSW5kZXggPT0gMCl7XG4gICAgICAgIGlmKG1hdGNoSW5kZXggPT0gMCB8fCBtYXRjaEluZGV4ID09IDIpe1xuICAgICAgICAgICAgbWF0Y2hJbmRleFRvQWRkVG8gPSAwXG4gICAgICAgIH0gZWxzZSBpZihtYXRjaEluZGV4ID09IDEgfHwgbWF0Y2hJbmRleCA9PSAzKXtcbiAgICAgICAgICAgIG1hdGNoSW5kZXhUb0FkZFRvID0gMVxuICAgICAgICB9IGVsc2UgaWYobWF0Y2hJbmRleCA9PSA0IHx8IG1hdGNoSW5kZXggPT0gNil7XG4gICAgICAgICAgICBtYXRjaEluZGV4VG9BZGRUbyA9IDJcbiAgICAgICAgfSBlbHNlIGlmKG1hdGNoSW5kZXggPT0gNSB8fCBtYXRjaEluZGV4ID09IDcpe1xuICAgICAgICAgICAgbWF0Y2hJbmRleFRvQWRkVG8gPSAzXG4gICAgICAgIH0gIFxuICAgICAgICBpZihtYXRjaEluZGV4ID09IDIgfHxtYXRjaEluZGV4ID09IDMgfHwgbWF0Y2hJbmRleCA9PSA2IHx8IG1hdGNoSW5kZXggPT0gNyl7XG4gICAgICAgICAgICBob21lVGVhbSA9IGZhbHNlO1xuICAgICAgICB9ICBcbiAgICB9IGVsc2UgaWYocm91bmRJbmRleCA9PSAxKXtcbiAgICAgICAgaWYgKG1hdGNoSW5kZXggPT0gMCB8fCBtYXRjaEluZGV4ID09IDIpe1xuICAgICAgICAgICAgbWF0Y2hJbmRleFRvQWRkVG8gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0Y2hJbmRleFRvQWRkVG8gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYobWF0Y2hJbmRleCA9PSAyIHx8bWF0Y2hJbmRleCA9PSAzKXtcbiAgICAgICAgICAgIGhvbWVUZWFtID0gZmFsc2U7XG4gICAgICAgIH0gXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbWF0Y2hJbmRleFRvQWRkVG8gPSAwO1xuICAgICAgICBpZihtYXRjaEluZGV4ID09IDEpe1xuICAgICAgICAgICAgaG9tZVRlYW0gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgbWF0Y2hUb0FkZFRvID0gdG91cm5hbWVudC5yb3VuZHNbcm91bmRJbmRleCsxXS5tYXRjaGVzW21hdGNoSW5kZXhUb0FkZFRvXTtcbiAgICBpZihob21lVGVhbSl7XG4gICAgICAgIG1hdGNoVG9BZGRUby5ob21lVGVhbU5hbWUgPSB3aW5uaW5nVGVhbTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBtYXRjaFRvQWRkVG8ub3V0VGVhbU5hbWUgPSB3aW5uaW5nVGVhbTtcbiAgICB9XG59XG4gIFxuXG5cblxuLy8gKioqIEZyb250ZW5kIEhlbHBlciBtZXRob2RzOiAqKiogLy9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQmFzZWRPbk5hbWUobmV3R3JvdXAgOiBHcm91cCwgZ3JvdXBzIDpHcm91cFtdKSA6IHZvaWQge1xuICAgIGxldCBpbmRleCA9IGZpbmRJbmRleE9mR3JvdXBCYXNlZE9uTmFtZShuZXdHcm91cCwgZ3JvdXBzKTtcbiAgICBncm91cHNbaW5kZXhdID0gbmV3R3JvdXA7XG59XG5cbmZ1bmN0aW9uIGZpbmRJbmRleE9mR3JvdXBCYXNlZE9uTmFtZShncm91cFRvRmluZDpHcm91cCAsIGdyb3VwcyA6IEdyb3VwW10pIDogYW55IHtcblxuICAgIGZvcihsZXQgaSBpbiBncm91cHMpe1xuICAgICAgICBpZihncm91cHNbaV0uZ3JvdXBuYW1lID09IGdyb3VwVG9GaW5kLmdyb3VwbmFtZSl7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vICoqKiBFTkQgKioqIC8vXG4iLCJcbmltcG9ydCB7fSBmcm9tICdqYXNtaW5lJztcbmltcG9ydCB7Z2V0TWF0Y2hlc0Zyb21UZWFtcywgZ2V0VG91cm5hbWVudCwgb3JkZXJUZWFtcywgYWRkVG9OZXh0S25vY2tvdXRSb3VuZH0gZnJvbSBcIi4uL3NyYy9zaGFyZWQvdXRpbHMvVG91cm5hbWVudFV0aWxzXCI7XG5pbXBvcnQge1xuICAgIHNldEdyb3VwTWF0Y2hTY29yZXMsIHNldEdyb3VwTWF0Y2hTY29yZTJGdWxseUVxdWFsVGVhbXMsIHNldEdyb3VwTWF0Y2hTY29yZTNFcXVhbFRlYW1zLFxuICAgIHNldEdyb3VwTWF0Y2hTY29yZTJvbjJFcXVhbFRlYW1zV2l0aERpZmZlcmVuY2VCZXR3ZWVuXG59IGZyb20gXCIuL1NwZWNIZWxwZXJzXCI7XG5pbXBvcnQge1RvdXJuYW1lbnR9IGZyb20gXCIuLi9zcmMvc2hhcmVkL21vZGVscy9wcm9ub3N0aWVrL1RvdXJuYW1lbnRcIjtcblxuXG5kZXNjcmliZShcInRoaXMgd2lsbCB0ZXN0IHRoZSBwcm9jZXNzaW5nIG9mIHRoZSBncm91cCBtYXRjaGVzOlwiLCBmdW5jdGlvbigpIHtcblxuICAgIGxldCAgdG91cm5hbWVudCA6IFRvdXJuYW1lbnQgPSBnZXRUb3VybmFtZW50KCk7XG5cbiAgICBpdChcInRvdXJuYW1lbnQgc2hvdWxkIGNvbnRhaW4gZ3JvdXAxIEFcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QodG91cm5hbWVudC5ncm91cHNbMF0uZ3JvdXBuYW1lKS50b0VxdWFsKFwiR3JvZXAgQVwiKTtcbiAgICB9KTtcblxuICAgIHNldEdyb3VwTWF0Y2hTY29yZXModG91cm5hbWVudCk7XG5cbiAgICBsZXQgZ3JvdXBBID0gIHRvdXJuYW1lbnQuZ3JvdXBzWzBdO1xuICAgIGdyb3VwQS5wcm9jZXNzTWF0Y2hlcygpO1xuXG4gICAgbGV0IHRlYW1BID0gdG91cm5hbWVudC5ncm91cHNbMF0udGVhbXNbMF07XG5cbiAgICBpdChcInRlYW0gQSBoYXMgMyBwb2ludHNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh0ZWFtQS5wb2ludHMpLnRvRXF1YWwoNCk7XG4gICAgfSk7XG5cbiAgICBpdChcInRlYW0gQyBoYXMgMSBwb2ludHNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh0b3VybmFtZW50Lmdyb3Vwc1swXS50ZWFtc1syXS5wb2ludHMpLnRvRXF1YWwoMik7XG4gICAgfSk7XG5cbiAgICBpdChcInRlYW0gRCBoYXMgMiBwb2ludHNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh0b3VybmFtZW50Lmdyb3Vwc1swXS50ZWFtc1szXS5wb2ludHMpLnRvRXF1YWwoMik7XG4gICAgfSk7XG5cbiAgICBpdChcInRlYW0gQSBoYXMgc2NvcmVkIDMgZ29hbHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QodGVhbUEuZ29hbHNTY29yZWQpLnRvQmUoNik7XG4gICAgfSk7XG5cbiAgICBpdChcInRlYW0gQSBoYXMgY29uY2lldmVkIDQgZ29hbHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QodGVhbUEuZ29hbHNDb25jaWV2ZWQpLnRvQmUoNCk7XG4gICAgfSk7XG5cbiAgICBpdChcInRlYW0gQSBoYXMgMSBkcmF3ZWQgbWF0Y2hcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QodGVhbUEubWF0Y2hlc0RyYXdlZCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KFwidGVhbSBBIGhhcyAxIHdvbiBtYXRjaFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdCh0ZWFtQS5tYXRjaGVzV29uKS50b0JlKDEpO1xuICAgIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwidGhpcyB3aWxsIHRlc3QgdGhlIHByb2Nlc3Npbmcgb2YgdGhlIGdyb3VwIG1hdGNoZXM6XCIsIGZ1bmN0aW9uKCkge1xuXG5cbiAgICB2YXIgIHRvdXJuYW1lbnQgOiBUb3VybmFtZW50ID0gZ2V0VG91cm5hbWVudCgpO1xuICAgIHNldEdyb3VwTWF0Y2hTY29yZXModG91cm5hbWVudCk7XG4gICAgdmFyIGdyb3VwQSA9ICB0b3VybmFtZW50Lmdyb3Vwc1swXTtcbiAgICBncm91cEEucHJvY2Vzc01hdGNoZXMoKTtcbiAgICBvcmRlclRlYW1zKGdyb3VwQSk7XG5cbiAgICBpdChcIlJ1c3NpYSBmaXJzdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgZXhwZWN0KGdyb3VwQS50ZWFtc1swXS5uYW1lKS50b0VxdWFsKFwiUnVzc2lhXCIpO1xuICAgIH0pO1xuXG5cbiAgICBpdChcIkVneXB0IHNlY29uZCBcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QoZ3JvdXBBLnRlYW1zWzFdLm5hbWUpLnRvRXF1YWwoXCJFZ3lwdFwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwiVXJ1Z3VheSBsYXN0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KGdyb3VwQS50ZWFtc1syXS5uYW1lKS50b0VxdWFsKFwiVXJ1Z3VheVwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwiU2F1ZGkgQXJhYmlhIHRoaXJkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KGdyb3VwQS50ZWFtc1szXS5uYW1lKS50b0VxdWFsKFwiU2F1ZGkgQXJhYmlhXCIpO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiZ3JvdXAgQTogXCIgKyBncm91cEEpO1xuICAgIHZhciBlcXVhbFRlYW1zID0gZ3JvdXBBLmdldEVxdWFsVGVhbXMoKTtcblxuICAgIGl0KFwiRWd5cHQgYW4gVXJ1Z3VheSBhcmUgY29uY2lkZXJlZCBlcXVhbFwiLCBmdW5jdGlvbigpe1xuICAgICAgIGV4cGVjdChlcXVhbFRlYW1zWzBdLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICBsZXQgZmlyc3QgPSBlcXVhbFRlYW1zWzBdWzBdLm5hbWUgPT0gXCJFZ3lwdFwiIHx8ICBlcXVhbFRlYW1zWzBdWzBdLm5hbWUgPT0gXCJVcnVndWF5XCI7XG4gICAgICAgbGV0IHNlY29uZCA9IGVxdWFsVGVhbXNbMF1bMV0ubmFtZSA9PSBcIkVneXB0XCIgfHwgIGVxdWFsVGVhbXNbMF1bMV0ubmFtZSA9PSBcIlVydWd1YXlcIjtcbiAgICAgICBleHBlY3QoZmlyc3QpLnRvQmVUcnV0aHkoKTtcbiAgICAgICBleHBlY3Qoc2Vjb25kKS50b0JlVHJ1dGh5KCk7XG5cbiAgICB9KTtcblxufSk7XG5cbmRlc2NyaWJlKFwid2Ugd2FudCB0byBiZSBhYmxlIHRvIHNlbGVjdCBhIHN1YnNldCBvZiBtYXRjaGVzXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciB0b3VybmFtZW50ID0gZ2V0VG91cm5hbWVudCgpO1xuICAgIHZhciBncm91cEEgPSAgdG91cm5hbWVudC5ncm91cHNbMF07XG4gICAgdmFyIHN1Yk1hdGNoZXMgPSAgZ2V0TWF0Y2hlc0Zyb21UZWFtcyhbZ3JvdXBBLnRlYW1zWzFdLGdyb3VwQS50ZWFtc1syXSxncm91cEEudGVhbXNbM11dLGdyb3VwQS5tYXRjaGVzKVxuXG4gICAgaXQoXCJ3ZSBleHBlY3QgMyBtYXRjaGVzIHRvIGJlIHNlbGVjdGVkXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGV4cGVjdChzdWJNYXRjaGVzLmxlbmd0aCkudG9CZSgzKTtcbiAgICB9KTtcblxufSk7XG5cblxuZGVzY3JpYmUoXCJJZiAzIFRlYW1zIGFyZSBlcXVhbCB3ZSBuZWVkIG1ha2UgYSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlbVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgdG91cm5hbWVudCA9IGdldFRvdXJuYW1lbnQoKTtcblxuICAgIHNldEdyb3VwTWF0Y2hTY29yZTNFcXVhbFRlYW1zKHRvdXJuYW1lbnQpO1xuXG4gICAgdmFyIGdyb3VwQSA9IHRvdXJuYW1lbnQuZ3JvdXBzWzBdO1xuICAgIGdyb3VwQS5wcm9jZXNzTWF0Y2hlcygpO1xuICAgIG9yZGVyVGVhbXMoZ3JvdXBBKTtcblxuXG4gICAgaXQoXCJ3ZSBleHBlY3QgMyB0ZWFtcyB0byBiZSBlcXVhbFwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICBleHBlY3QoZ3JvdXBBLmdldEVxdWFsVGVhbXMoKS5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICAgICAgIGV4cGVjdChncm91cEEuZ2V0RXF1YWxUZWFtcygpWzBdLmxlbmd0aCkudG9CZSgzKTtcblxuICAgIH0pO1xuXG5cbiAgICBpdChcIlJ1c3NpYSBzaG91bGQgYmUgZmlyc3RcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QoZ3JvdXBBLnRlYW1zWzBdLm5hbWUpLnRvQmUoXCJSdXNzaWFcIilcbiAgICB9KTtcblxuICAgIGl0KFwiU2F1ZGkgQXJhYmlhIHNob3VsZCBiZSBzZWNvbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QoZ3JvdXBBLnRlYW1zWzFdLm5hbWUpLnRvQmUoXCJTYXVkaSBBcmFiaWFcIilcbiAgICB9KVxuICAgIGl0KFwiVXJ1Z3VheSBzaG91bGQgYmUgdGhpcmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QoZ3JvdXBBLnRlYW1zWzJdLm5hbWUpLnRvQmUoXCJVcnVndWF5XCIpXG4gICAgfSlcbiAgICBpdChcIkVneXB0IHNob3VsZCBiZSBsYXN0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KGdyb3VwQS50ZWFtc1szXS5uYW1lKS50b0JlKFwiRWd5cHRcIilcbiAgICB9KVxuXG5cblxufSk7XG5cbmRlc2NyaWJlKFwiSWYgMiBvbiAyIFRlYW1zIGFyZSBlcXVhbCB3ZSBuZWVkIG1ha2UgYSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlbVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgdG91cm5hbWVudCA9IGdldFRvdXJuYW1lbnQoKTtcblxuICAgIHNldEdyb3VwTWF0Y2hTY29yZTJvbjJFcXVhbFRlYW1zV2l0aERpZmZlcmVuY2VCZXR3ZWVuKHRvdXJuYW1lbnQpO1xuXG4gICAgdmFyIGdyb3VwQiA9IHRvdXJuYW1lbnQuZ3JvdXBzWzFdO1xuICAgIGdyb3VwQi5wcm9jZXNzTWF0Y2hlcygpO1xuICAgIG9yZGVyVGVhbXMoZ3JvdXBCLCB0cnVlKTtcblxuXG4gICAgaXQoXCJ3ZSBleHBlY3QgMiB0ZWFtcyB0byBiZSBlcXVhbFwiLCBmdW5jdGlvbigpe1xuICAgICAgICBleHBlY3QoZ3JvdXBCLmdldEVxdWFsVGVhbXMoKS5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChncm91cEIuZ2V0RXF1YWxUZWFtcygpWzBdLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICAgZXhwZWN0KGdyb3VwQi5nZXRFcXVhbFRlYW1zKClbMV0ubGVuZ3RoKS50b0JlKDIpO1xuICAgIH0pO1xuXG59KTtcblxuZGVzY3JpYmUoXCJpdCBzaG91bGQgYWRkIHRlYW1zIHRvIG5leHQga25vY2tvdXRyb3VuZFwiLCBmdW5jdGlvbigpe1xuICAgIHZhciB0b3VybmFtZW50ID0gZ2V0VG91cm5hbWVudCgpO1xuICAgIGNvbnN0IHdpbm5pbmdUZWFtID0gXCJ3aW5uZXJzXCJcbiAgICBhZGRUb05leHRLbm9ja291dFJvdW5kKHRvdXJuYW1lbnQsIDAsIDAgLCB3aW5uaW5nVGVhbSk7XG4gICAgaXQoXCJzaG91bGQgaGF2ZSBhZGRlZCB0byBmaXJzdFwiLCBmdW5jdGlvbigpe1xuICAgICAgICBleHBlY3QodG91cm5hbWVudC5yb3VuZHNbMV0ubWF0Y2hlc1swXS5ob21lVGVhbU5hbWUpLnRvQmUod2lubmluZ1RlYW0pO1xuICAgIH0pXG59KTsiXSwic291cmNlUm9vdCI6IiJ9